title: Eurekaæºç è§£æ â€”â€” é¡¹ç›®ç»“æ„ç®€ä»‹
date: 2018-04-01
tags:
categories: Eureka
permalink: Eureka/project-structure

---

# 1. æ¦‚è¿°

æœ¬æ–‡ä¸»è¦åˆ†äº« **Eureka** çš„é¡¹ç›®ç»“æ„ï¼Œé™„å¸¦éƒ¨åˆ†ç®€ä»‹å’ŒåŸç†ã€‚

Eureka é¡¹ç›®åœ°å€ï¼š[https://github.com/Netflix/eureka](https://github.com/Netflix/eureka)

* è¯·æ³¨æ„ä¸‹ï¼Œä¸æ˜¯ `spring-cloud-netflix-eureka-client` / `spring-cloud-netflix-eureka-server` ã€‚
* æœ¬äºº Fork çš„ä»£ç ä»“åº“ [https://github.com/YunaiV/eureka](https://github.com/YunaiV/eureka)ï¼Œä¼šéšç€è¿™ä¸ªç³»åˆ—çš„æ–‡ç« é€æ¸å¢åŠ **ä¸­æ–‡æ³¨é‡Š**ï¼Œå¯ä»¥å…ˆ Star ä¸€ä¸‹ã€‚

## 1.1 ç®€ä»‹

Eureka æ˜¯ [Netflix](https://zh.wikipedia.org/wiki/Netflix) å¼€æºçš„æœåŠ¡æ³¨å†Œå‘ç°ä¸­é—´ä»¶ï¼Œåˆ†æˆ Client å’Œ Server ä¸¤éƒ¨åˆ†ã€‚æ¶æ„å¦‚ä¸‹å›¾ï¼š

[](../../../images/Eureka/2018_04_01/01.png)

* Eureka-Server ï¼šé€šè¿‡ REST æ¥å£ï¼Œæä¾›æœåŠ¡æ³¨å†Œå’Œå‘ç°çš„åŠŸèƒ½ã€‚
* Application Provider ï¼šåº”ç”¨æœåŠ¡æä¾›è€…ï¼Œå†…åµŒ Eureka-Client ï¼Œé€šè¿‡å®ƒå‘ Eureka-Server æ³¨å†Œè‡ªèº«æœåŠ¡ã€‚
* Application Consumer ï¼šåº”ç”¨æœåŠ¡æ¶ˆè´¹è€…ï¼Œå†…åµŒ Eureka-Client ï¼Œé€šè¿‡å®ƒä» Eureka-Server è·å–æœåŠ¡åˆ—è¡¨ã€‚
* è¯·æ³¨æ„ä¸‹ï¼ŒApplication Provider å’Œ Application Consumer å¯ä»¥åœ¨åŒä¸€ JVM è¿›ç¨‹ã€‚

## 1.2 é¡¹ç›®ç»“æ„

Eureka é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š

[](../../../images/Eureka/2018_04_01/02.png)

â“â“â“ä¸åª Eureka-Client ã€ Eureka-Server â“â“â“

æ·¡å®šï¼Œä¸‹é¢æˆ‘ä»¬å­æ¨¡å—ä¸€ä¸ªä¸€ä¸ªè¿‡ä¸‹å»ã€‚

# 2. `eureka-client`

`eureka-client` æ¨¡å—ä¸º Eureka-Client çš„åŠŸèƒ½å®ç°ï¼š

* `com.netflix.appinfo` åŒ…ï¼šEureka-Client çš„åº”ç”¨é…ç½®ä¿¡æ¯å’Œåº”ç”¨è¿è¡Œæ—¶ä¿¡æ¯ã€‚æ­¤å¤„çš„åº”ç”¨æŒ‡çš„å°±æ˜¯ä¸Šæ–‡æåˆ°çš„ Application Providerï¼ŒApplication Consumerã€‚ TODO éœ€è¦è¿›ä¸€æ­¥å®Œå–„
* `com.netflix.discovery` åŒ…ï¼šEureka-Client çš„æ³¨å†Œä¸å‘ç°ç›¸å…³åŠŸèƒ½ã€‚
    * `com.netflix.discovery.DiscoveryClient` ç±»ï¼šæ³¨å†Œå‘ç°å®¢æˆ·ç«¯å®ç°ç±»ã€‚
    * `com.netflix.discovery.guice` åŒ…ï¼šEureka ä½¿ç”¨ [Google Guice](https://github.com/google/guice) å®ç°ä¾èµ–æ³¨å…¥ã€‚

        > Guice (pronounced 'juice') is a lightweight dependency injection framework for Java 6 and above, brought to you by Google. 

    * `com.netflix.discovery.converters` åŒ…ï¼šEureka å†…éƒ¨ä¼ è¾“æ•°æ®ç¼–è§£ç è½¬æ¢å™¨ï¼Œæ”¯æŒ XML / JSON æ ¼å¼ã€‚
    * `com.netflix.discovery.endpoint` åŒ…ï¼šTODO éœ€è¦è¿›ä¸€æ­¥å®Œå–„
    * `com.netflix.disvoery.provider` åŒ…ï¼šTODO 
    * `com.netflix.disvoery.providers` åŒ…ï¼šTODO 
    * `com.netflix.discovery.shared` åŒ…ï¼šEureka-Client å’Œ Eureka-Server æ³¨å†Œå‘ç°ç›¸å…³çš„å…±äº«é‡ç”¨çš„ä»£ç ã€‚ä¸‹æ–‡ä½ ä¼šçœ‹åˆ°ï¼ŒEureka-Server ä¸»è¦ä»£ç é€šè¿‡ `eureka-core` æ¨¡å—å®ç°ï¼Œ`eureka-core` ä¾èµ– `eureka-client`ã€‚**ç²—ä¸€çœ‹ï¼Œæˆ‘ä»¬ä¼šæ„Ÿè§‰ï¼ŒWhat ï¼ŸEureka-Server ä»£ç ä¾èµ– Eureka-Client ä»£ç ï¼ï¼Ÿ**è¿™ä¸ªå’Œ Eureka-Server å¤šèŠ‚ç‚¹æ³¨å†Œä¿¡æ¯ P2P åŒæ­¥çš„å®ç°æœ‰å…³ã€‚ä¸€ä¸ª Eureka-Server æ”¶åˆ° Eureka-Client æ³¨å†Œè¯·æ±‚åï¼ŒEureka-Server ä¼šè‡ªå·±æ¨¡æ‹Ÿ Eureka-Client å‘é€æ³¨å†Œè¯·æ±‚åˆ°å…¶å®ƒçš„ Eureka-Serverï¼Œå› æ­¤éƒ¨åˆ†å®ç°ä»£ç å°±ä½¿ç”¨åˆ°äº†è¿™ä¸ªåŒ…ã€‚ğŸ™‚åé¢ä¼šå•ç‹¬å¼€ä¸€ç¯‡æ–‡ç« è¯¦ç»†è§£æã€‚
        * `com.netflix.discovery.shared.transport` åŒ…ï¼šEureka-Client å¯¹ Eureka-Server RESTful çš„ HTTP å®¢æˆ·ç«¯ï¼ŒåŸºäº Jersey Client å®ç°ã€‚Jersey åœ¨ä¸‹æ–‡ã€Œ2.1 `eureka-client-jersey2`ã€è¯¦ç»†è§£æã€‚
        * `com.netflix.discovery.shared.dns` åŒ… ï¼šDNS è§£ææœåŠ¡ã€‚
        * `com.netflix.discovery.shared.resolver` åŒ…ï¼šTODOï¼Œå¯èƒ½è¿˜æ˜¯æµ‹è¯•æ€§

    * `com.netflix.discovery.util` åŒ… ï¼šå·¥å…·ç±»ã€‚

## 2.1 `eureka-client-archaius2`

TODO 

## 2.2 `eureka-client-jersey2`

[Jersey](https://github.com/jersey/jersey) æ˜¯ JAX-RSï¼ˆJSR311ï¼‰å¼€æºå‚è€ƒå®ç°ï¼Œç”¨äºæ„å»º RESTful Web Serviceã€‚

* Eureka-Server ä½¿ç”¨ [Jersey Server](https://github.com/jersey/jersey/tree/9fdb7e386dc56b33f569ab198caf818d7a18525d/core-server/) åˆ›å»º RESTful Server ã€‚
* Eureka-Client ä½¿ç”¨ [Jersey Client](https://github.com/jersey/jersey/tree/9fdb7e386dc56b33f569ab198caf818d7a18525d/core-client/) è¯·æ±‚ Eureka-Server ã€‚

Jersey ç›®å‰æœ‰ 1.x å’Œ 2.x ç‰ˆæœ¬ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒEureka ä½¿ç”¨ 1.x ç‰ˆæœ¬ã€‚ä»å®˜æ–¹æ–‡æ¡£ä¸Šæ¥çœ‹ï¼Œ2.x ç‰ˆæœ¬ç”±ç¤¾åŒºå®ç°ï¼ŒNetflix è‡ªå·±æš‚æœªä½¿ç”¨ã€‚

> FROM [eureka-client-jersey2 README](https://github.com/Netflix/eureka/tree/30a85dc31be1c9d399e4e6ec5150759fb8777edf/eureka-client-jersey2/)  
> Please note that this jersey2 compatible Eureka client (eureka-client-jersey2) is created and maintained by the community. Netflix does not currently use this library internally.

# 3. `eureka-core`

`eureka-core` æ¨¡å—ä¸º Eureka-Server çš„åŠŸèƒ½å®ç°ï¼š

* `com.netflix.eureka.EurekaBootStrap` ç±»ï¼šEureka-Server å¯åŠ¨ç±»ã€‚
* `com.netflix.eureka.aws` åŒ…ï¼šä¸äºšé©¬é€Š AWS æœåŠ¡ç›¸å…³çš„ç±»ã€‚ç”±äºç¬”è€…å¯¹ AWS æš‚ä¸äº†è§£ï¼Œæœ¬ç³»åˆ—ä¼šè·³è¿‡å’Œ AWS ç›¸å…³çš„ä»£ç ã€‚
* `com.netflix.eureka.cluster` åŒ…ï¼šEureka-Server é›†ç¾¤æ•°æ®å¤åˆ¶ç›¸å…³çš„ä»£ç ã€‚
* `com.netflix.eureka.lease` åŒ…ï¼šåº”ç”¨æ³¨å†Œåçš„ç§Ÿçº¦ç®¡ç†( æ³¨å†Œ / å–æ¶ˆ / ç»­æœŸ / è¿‡æœŸ )ã€‚TODO è¿›ä¸€æ­¥å®Œå–„
* `com.netflix.eureka.resousrces` åŒ…ï¼šèµ„æºï¼ŒåŸºäº Jersey Server å®ç°ï¼Œç›¸å½“äº Spring MVC çš„æ§åˆ¶å±‚ä»£ç ã€‚
* `com.netflix.eureka.transport` åŒ…ï¼šEureka-Server å¯¹ Eureka-Server çš„ RESTful HTTP å®¢æˆ·ç«¯ï¼ŒåŸºäº `com.netflix.discovery.shared.transport` å°è£…å®ç°ã€‚
* `com.netflix.eureka.util` åŒ…ï¼šå·¥å…·ç±»ã€‚

## 3.1 `eureka-core-jersey2`

å‚è§æœ¬æ–‡ã€Œ2.1 `eureka-client-jersey2`ã€ã€‚

# 4. `eureka-resources`

`eureka-resources` æ¨¡å—ï¼Œä½¿ç”¨ JSP å®ç° Eureka-Server çš„è¿ç»´åå°ç•Œé¢ã€‚é¡¹ç›®ç»“æ„å¦‚ä¸‹å›¾ï¼š

[](../../../images/Eureka/2018_04_01/03.png)

# 5. `eureka-server`

`eureka-server` æ¨¡å—ï¼Œå°† `eureka-client` + `eureka-core` + `eureka-resources` ä¸‰è€…æ‰“åŒ…æˆä¸€ä¸ª `war` åŒ…ã€‚é¡¹ç›®ç»“æ„å¦‚ä¸‹å›¾ï¼š

[](../../../images/Eureka/2018_04_01/04.png)

## 5.1 `eureka-server-governator`

# 6. `eureka-examples`

# 7. `eureka-test-utils`

# 666. å½©è›‹

