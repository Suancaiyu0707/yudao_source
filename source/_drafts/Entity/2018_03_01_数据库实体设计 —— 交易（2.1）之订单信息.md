title: æ•°æ®åº“å®ä½“è®¾è®¡ â€”â€” äº¤æ˜“ï¼ˆ2.1ï¼‰ä¹‹è®¢å•ä¿¡æ¯
date: 2018-03-01
tags:
categories: æ•°æ®åº“å®ä½“è®¾è®¡
permalink: Entity/trade-module-order

-------

æ‘˜è¦: åŸåˆ›å‡ºå¤„ http://www.iocoder.cn/Entity/trade-module-order/ ã€ŒèŠ‹é“æºç ã€æ¬¢è¿è½¬è½½ï¼Œä¿ç•™æ‘˜è¦ï¼Œè°¢è°¢ï¼

- [1. æ¦‚è¿°](http://www.iocoder.cn/Entity/trade-module-order/)
- [2. èƒŒæ™¯äº†è§£](http://www.iocoder.cn/Entity/trade-module-order/)
  - [2.1 ç•Œé¢](http://www.iocoder.cn/Entity/trade-module-order/)
- [3. æ•°æ®åº“å®ä½“](http://www.iocoder.cn/Entity/trade-module-order/)
  - [3.1 Trade](http://www.iocoder.cn/Entity/trade-module-order/)
  - [3.2 TradeAdjustFee](http://www.iocoder.cn/Entity/trade-module-order/)
  - [3.3 TradeOrder](http://www.iocoder.cn/Entity/trade-module-order/)
- [4. API](http://www.iocoder.cn/Entity/trade-module-order/)
  - [4.1 TradeAPI](http://www.iocoder.cn/Entity/trade-module-order/)
- [5. äº¬ä¸œè®¢å•ç»“æ„](http://www.iocoder.cn/Entity/trade-module-order/)
- [666. å½©è›‹](http://www.iocoder.cn/Entity/trade-module-order/)

-------

# 1. æ¦‚è¿°

æœ¬æ–‡ä¸»è¦åˆ†äº«**äº¤æ˜“æ¨¡å—çš„[è®¢å•ä¿¡æ¯](#)çš„æ•°æ®åº“å®ä½“è®¾è®¡**ã€‚

åŸºäºå¦‚ä¸‹ä¿¡æ¯ï¼Œé€†å‘çŒœæµ‹æ•°æ®åº“å®ä½“ï¼š

* [æœ‰èµäº‘æä¾›çš„å•†å®¶ç®¡ç†è®¢å•API](https://www.youzanyun.com/apilist/list/group_trade/trade)
* [æœ‰èµäº‘æä¾›çš„ä¹°å®¶ä¸‹å•API](https://www.youzanyun.com/apilist/list/group_buyer/buyer_bill)
* [æœ‰èµ**å¾®å•†åŸ**çš„è®¢å•ç®¡ç†](https://www.youzan.com/v2/trade/order/index)

> ã€æŠ¤è„¸æ—ç™½ã€‘  
> ç¬”è€…éç”µå•†è¡Œä¸šå‡ºèº« && **éæœ‰èµå·¥ç¨‹å¸ˆ**ï¼Œæ‰€ä»¥æœ‰é”™è¯¯æˆ–ä¸åˆç†çš„åœ°æ–¹ï¼Œçƒ¦è¯·æ–§æ­£å’Œæ¢è®¨ã€‚  
> æœ‰èµæ˜¯ä¸ªå„æ–¹é¢éƒ½å¾ˆ NICE çš„å…¬å¸ï¼Œ[æ¨è](http://www.iocoder.cn/NeiTui/hangzhou/?self) ã€‚

# 2. èƒŒæ™¯äº†è§£

å‚è§ [ã€Šè®¢å•ä¸­å¿ƒè®¾è®¡ã€‹](https://github.com/tangxuehua/ecommerce/wiki/%E8%AE%A2%E5%8D%95%E4%B8%AD%E5%BF%83%E8%AE%BE%E8%AE%A1) ï¼Œå†™çš„éå¸¸éå¸¸éå¸¸æ£’ã€‚

## 2.1 ç•Œé¢

1. è¿è¥åå°-è®¢å•ç®¡ç†-æ‰€æœ‰è®¢å•  ![](http://www.iocoder.cn/images/Entity/2018_03_01/01.png)
2. è¿è¥åå°-è®¢å•ç®¡ç†-è®¢å•è¯¦æƒ…  ![](http://www.iocoder.cn/images/Entity/2018_03_01/02.png)

# 3. æ•°æ®åº“å®ä½“

![](http://www.iocoder.cn/images/Entity/2018_03_01/13.png)

**æ³¨æ„**ï¼Œä¸åŒäºæˆ‘ä»¬å¸¸ç”¨çš„[äº¬ä¸œ](http://www.jd.com)ç”µå•†å¹³å°ï¼Œä¸å­˜åœ¨æ‹†å•çš„æƒ…å†µï¼š

* åŸºäºå•†å®¶çš„æ‹†å• ![](http://www.iocoder.cn/images/Entity/2018_03_01/03.png)
    * å› ä¸ºæœ‰èµæ˜¯ä¸€ä¸ª Saas åŒ–çš„å»ä¸­å¿ƒåŒ–çš„ç”µå•†ç³»ç»Ÿï¼Œè€Œä¸æ˜¯ä¸€ä¸ªä¸­å¿ƒåŒ–çš„ç”µå•†å¹³å°ï¼Œæ²¡æœ‰è·¨å•†å®¶ä¸‹å•çš„éœ€æ±‚
* åŸºäºä»“åº“çš„**è‡ªåŠ¨**æ‹†å• ![](http://www.iocoder.cn/images/Entity/2018_03_01/04.png)
    * å› ä¸ºæœ‰èµä¹°å®¶è´­ä¹°çš„æ¯**ç§**( ç›¸åŒå•†å“è´­ä¹°å¤šä¸ªï¼Œä¹Ÿæ˜¯ä¸€ç§ )å•†å“éƒ½ä¼šç”Ÿæˆä¸€æ¡**äº¤æ˜“æ˜ç»†**ï¼Œå–å®¶å¯ä»¥ç»„åˆæ’åˆ—å‘è´§ã€‚ä¾‹å¦‚ï¼Œä¹°å®¶è´­ä¹°äº† Aã€Bã€C å•†å“ï¼Œå–å®¶å¯ä»¥æŒ‰ç…§ [A,B,C] ï¼Œä¹Ÿå¯ä»¥ [A,B]+[C]ï¼Œä¹Ÿå¯ä»¥ [A]+[B]+[C] ä»¥åŠç­‰ç­‰**æ‰‹åŠ¨**å‘è´§ã€‚åé¢ï¼Œæˆ‘ä»¬ä¼šå¦å¤–å•ç‹¬åˆ†äº«[ç‰©æµ](https://www.youzanyun.com/apilist/list/group_trade/logistics)è¿™å—ã€‚

å…³äº**è®¢å•æ‹†å•**çš„é€»è¾‘ï¼Œèƒ–å‹å¯ä»¥é˜…è¯» [ã€Šè®¢å•æ‹†å•ï¼šæŠŠäº§å“é€»è¾‘æ‹†ç»™ä½ çœ‹ã€‹](http://www.ebrun.com/20171128/256998.shtml) æ–‡ç« ï¼š

> è®¢å•æ‹†å•åœ¨ç”µå•†è®¢å•ä¸­å¾ˆå¸¸è§ï¼Œä¹Ÿæ¯”è¾ƒå¤æ‚ã€‚æ‹†å•ä¹Ÿæœ‰ä¸¤æ¬¡ï¼š
> 
> * ä¸€æ¬¡æ˜¯åœ¨ç”¨æˆ·æäº¤è®¢å•ä¹‹åã€æ”¯ä»˜ä¹‹å‰æ‹†å•ï¼Œè¿™æ¬¡æ˜¯æ‹†åˆ†çš„è®¢å•ï¼›
> * å¦ä¸€æ¬¡æ˜¯åœ¨ç”¨æˆ·ä¸‹å•ä¹‹åï¼Œå•†å®¶å‘è´§ä¹‹å‰ï¼Œå»æ‹†åˆ†å‘è´§å•ï¼ˆSKUå±‚é¢ï¼‰ã€‚
> 
> ä¸¤æ¬¡æ‹†å•çš„åŸåˆ™ä¸åŒï¼š
> 
> * ç¬¬ä¸€æ¬¡æ‹†å•æ˜¯ä¸ºäº†åŒºåˆ†å¹³å°å•†å®¶ã€æ–¹ä¾¿è´¢åŠ¡ç»“ç®—ï¼›
> * ç¬¬äºŒæ¬¡æ‹†å•æ˜¯ä¸ºäº†æŒ‰ç…§æœ€åçš„å‘è´§åŒ…è£¹è¿›è¡Œæ‹†å•ï¼Œå¦‚ä¸åŒä»“åº“ã€ä¸åŒè¿è¾“è¦æ±‚çš„SKUã€åŒ…è£¹é‡é‡ä½“ç§¯é™åˆ¶ç­‰å› ç´ ï¼ˆç¬¬äºŒæ¬¡æ‹†å•çš„æœ‰äº›æ­¥éª¤ä¹Ÿå¯ä»¥æ”¾åœ¨ç¬¬ä¸€æ­¥ï¼‰ã€‚

## 3.1 Trade

[Trade](TODO) ï¼Œäº¤æ˜“ã€‚ä¸€æ¬¡ä¸‹å•ï¼Œç”Ÿæˆä¸€æ¡äº¤æ˜“è®°å½•ï¼Œå³ä½¿å¤šç§å•†å“ã€‚

å­—æ®µè¾ƒå¤šï¼Œæˆ‘ä»¬è¿›è¡Œç®€å•çš„åˆ‡å—ã€‚

### 3.1.1 åŸºç¡€å­—æ®µ

```Java
/**
 * äº¤æ˜“ç¼–å·
 *
 * å”¯ä¸€ï¼Œä¾‹å¦‚ï¼šE20180125232933007700006
 */
private String id;
/**
 * åº—é“ºç¼–å·
 */
private Integer shopId;
/**
 * äº¤æ˜“ç±»å‹
 *
 * 0ï¼šFIXED ï¼ˆä¸€å£ä»·ï¼‰
 * 1ï¼šGIFT ï¼ˆé€ç¤¼ï¼‰
 * 2ï¼šBULK_PURCHASEï¼ˆæ¥è‡ªåˆ†é”€å•†çš„é‡‡è´­ï¼‰
 * 3ï¼šPRESENT ï¼ˆèµ å“é¢†å–ï¼‰
 * 4ï¼šGROUP ï¼ˆæ‹¼å›¢è®¢å•ï¼‰
 * 5ï¼šPIFA ï¼ˆæ‰¹å‘è®¢å•ï¼‰
 * 6ï¼šCOD ï¼ˆè´§åˆ°ä»˜æ¬¾ï¼‰
 * 7ï¼šPEER ï¼ˆä»£ä»˜ï¼‰
 * 8ï¼šQRCODEï¼ˆæ‰«ç å•†å®¶äºŒç»´ç ç›´æ¥æ”¯ä»˜çš„äº¤æ˜“ï¼‰
 * 9ï¼šQRCODE_3RDï¼ˆçº¿ä¸‹æ”¶é“¶å°äºŒç»´ç äº¤æ˜“)
 */
private Integer type;
/**
 * äº¤æ˜“ä¸»çŠ¶æ€ã€‚
 *
 * TODO èŠ‹è‰¿ï¼šTRADE_NO_CREATE_PAY (æ²¡æœ‰åˆ›å»ºæ”¯ä»˜äº¤æ˜“)
 * 3ï¼šWAIT_BUYER_PAY (ç­‰å¾…ä¹°å®¶ä»˜æ¬¾)
 * TODO èŠ‹è‰¿ï¼šWAIT_PAY_RETURN (ç­‰å¾…æ”¯ä»˜ç¡®è®¤)
 * TODO èŠ‹è‰¿ï¼šWAIT_GROUPï¼ˆç­‰å¾…æˆå›¢ï¼Œå³ï¼šä¹°å®¶å·²ä»˜æ¬¾ï¼Œç­‰å¾…æˆå›¢ï¼‰
 * 5ï¼šWAIT_SELLER_SEND_GOODS (ç­‰å¾…å–å®¶å‘è´§ï¼Œå³ï¼šä¹°å®¶å·²ä»˜æ¬¾)
 * 6ï¼šWAIT_BUYER_CONFIRM_GOODS (ç­‰å¾…ä¹°å®¶ç¡®è®¤æ”¶è´§ï¼Œå³ï¼šå–å®¶å·²å‘è´§)
 * 100ï¼šTRADE_BUYER_SIGNED (ä¹°å®¶å·²ç­¾æ”¶ï¼Œå³ï¼šäº¤æ˜“å·²å®Œæˆ)
 * 99ï¼šTRADE_CLOSED (ä»˜æ¬¾ä»¥åç”¨æˆ·é€€æ¬¾æˆåŠŸæˆ–è€…ä»˜æ¬¾è¶…æ—¶æˆ–å•†å®¶å–æ¶ˆï¼Œå³ï¼šäº¤æ˜“å·²å…³é—­)
 */
private Integer status;
/**
 * äº¤æ˜“åˆ›å»ºæ—¶é—´
 */
private Date createTime;
/**
 * äº¤æ˜“æ›´æ–°æ—¶é—´ã€‚
 *
 * å½“äº¤æ˜“çš„ï¼šçŠ¶æ€æ”¹å˜ã€å¤‡æ³¨æ›´æ”¹ã€æ˜Ÿæ ‡æ›´æ”¹ ç­‰æƒ…å†µä¸‹éƒ½ä¼šåˆ·æ–°æ›´æ–°æ—¶é—´
 */
private Date updateTime;
/**
 * å…³é—­ç±»å‹
 *
 * 1-è¶…æ—¶æœªæ”¯ä»˜
 * 2-é€€æ¬¾å…³é—­
 * 4-ä¹°å®¶å–æ¶ˆ
 * 15-å·²é€šè¿‡è´§åˆ°ä»˜æ¬¾äº¤æ˜“
 * ... å¯èƒ½è¿˜æœ‰å…¶ä»–å…³é—­åŸå› 
 */
private Integer closeType;
/**
 * å…³é—­æ—¶é—´
 */
private Date closeTime;
```

* `id` ï¼Œäº¤æ˜“å·ã€‚ä¾‹å¦‚ï¼šE20180125232933007700006 ã€‚ç¬”è€…çŒœæµ‹æ ¼å¼ä¸ºï¼š**é¦–å­—æ¯** + å¹´æœˆæ—¥æ—¶åˆ†ç§’ + `0077`ï¼ˆå¯èƒ½æ˜¯æœ‰ä»€ä¹ˆä¸šåŠ¡å«ä¹‰ï¼‰ + è‡ªå¢åºåˆ—ã€‚
* `shopId` ï¼Œåº—é“ºç¼–å·ã€‚
* `type` ï¼Œè®¢å•ç±»å‹ã€‚æœ‰èµæ”¯æŒå¤šç§è®¢å•ç±»å‹ï¼Œæœ¬æ–‡ä»¥ `type = 0` ï¼Œæ™®é€šè®¢å•ç±»å‹ã€‚å…¶ä»–ç±»å‹ï¼Œæˆ‘ä»¬ä¼šå¦å¤–å†™æ–‡ç« è¿›è¡Œåˆ†äº«ã€‚
* `status` ï¼Œäº¤æ˜“**ä¸»çŠ¶æ€**ã€‚äº¤æ˜“ä¼šæœ‰è¾ƒå¤š**åˆ†æ”¯**çŠ¶æ€ï¼Œä¾‹å¦‚é€€æ¬¾çŠ¶æ€ã€ç‰©æµçŠ¶æ€ç­‰ç­‰çŠ¶æ€ã€‚ä¸åŒäºåˆ†æ”¯çŠ¶æ€ï¼Œ**ä¸»çŠ¶æ€**æ§åˆ¶æ•´ä¸ªè®¢å•çš„ç”Ÿå‘½å‘¨æœŸã€‚
    * å¦‚ä¸‹çŠ¶æ€ç¬”è€…æš‚æœªæµ‹è¯•åˆ°ï¼Œç­‰æœªæ¥è¿›è¡Œè¡¥å……ï¼š1ï¼‰æ²¡æœ‰åˆ›å»ºæ”¯ä»˜äº¤æ˜“ï¼›2ï¼‰ç­‰å¾…æ”¯ä»˜ç¡®è®¤ï¼›3ï¼‰ä¹°å®¶å·²ä»˜æ¬¾ï¼Œç­‰å¾…æˆå›¢ã€‚
    * çŠ¶æ€æµè½¬å¦‚ä¸‹å›¾ï¼š![](http://www.iocoder.cn/images/Entity/2018_03_01/05.png)
    * ğŸ™‚ çŠ¶æ€çš„è®¾è®¡æ˜¯éå¸¸å€¼å¾—æ¢è®¨ï¼ŒæœŸç›¼èƒ–å‹çš„è®¨è®ºã€‚
* `createTime` ï¼Œäº¤æ˜“åˆ›å»ºæ—¶é—´ã€‚**æ³¨æ„**ï¼Œè®°å½•æµç¨‹çš„æ•°æ®åº“è¡¨ï¼Œå°½é‡è®°å½•æ¯ä¸ªæ“ä½œçš„æ—¶é—´ï¼Œæ–¹ä¾¿ä¸šåŠ¡ä¸Šå›æº¯ä¸æ•°æ®åˆ†æã€‚
* `closeType` ï¼Œå…³é—­ç±»å‹ã€‚äº¤æ˜“çŠ¶æ€æœ€ç»ˆå˜æˆ**å·²å…³é—­**æœ‰å¤šç§æƒ…å†µï¼Œé€šè¿‡è¯¥å­—æ®µè®°å½•ã€‚  ![](http://www.iocoder.cn/images/Entity/2018_03_01/06.png)

### 3.1.2 å•†å“ä¿¡æ¯

```Java
/**
 * å•†å“è´­ä¹°æ•°é‡ã€‚
 *
 * å½“ä¸€ä¸ª trade å¯¹åº”å¤šä¸ª order çš„æ—¶å€™ï¼Œå€¼ä¸ºæ‰€æœ‰å•†å“è´­ä¹°æ•°é‡ä¹‹å’Œ
 */
private Integer num;
/**
 * å•†å“æ•°å­—ç¼–å·ã€‚
 *
 * å½“ä¸€ä¸ªtradeå¯¹åº”å¤šä¸ªorderçš„æ—¶å€™ï¼Œå€¼ä¸ºç¬¬ä¸€ä¸ªäº¤æ˜“æ˜ç»†ä¸­çš„å•†å“çš„ç¼–å·
 */
private Integer itemId;
/**
 * å•†å“ä»·æ ¼ï¼Œå•ä½ï¼šåˆ†ã€‚
 *
 * å½“ä¸€ä¸ªtradeå¯¹åº”å¤šä¸ªorderçš„æ—¶å€™ï¼Œå€¼ä¸ºç¬¬ä¸€ä¸ªäº¤æ˜“æ˜ç»†ä¸­çš„å•†å“çš„ä»·æ ¼
 */
private Integer price;
/**
 * å•†å“ä¸»å›¾ç‰‡åœ°å€ã€‚
 *
 * å½“ä¸€ä¸ªtradeå¯¹åº”å¤šä¸ªorderçš„æ—¶å€™ï¼Œå€¼ä¸ºç¬¬ä¸€ä¸ªäº¤æ˜“æ˜ç»†ä¸­çš„å•†å“çš„å›¾ç‰‡åœ°å€
 */
private String picPath;
/**
 * äº¤æ˜“æ ‡é¢˜ã€‚
 *
 * ä»¥é¦–ä¸ªå•†å“æ ‡é¢˜ä½œä¸ºæ­¤æ ‡é¢˜çš„å€¼
 */
private String title;
```

* æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¯¥å¿«å­—æ®µä¸»è¦**å†—ä½™**äº†ç¬¬ä¸€ä¸ªå•†å“çš„åŸºç¡€ä¿¡æ¯åˆ°äº¤æ˜“è®°å½•ä¸­ã€‚

### 3.1.3 ä¹°å®¶ä¿¡æ¯

```Java
/**
 * ä¹°å®¶ç”¨æˆ·ç¼–å·
 */
private Integer buyerId;
//    @JsonProperty(value = "fans_info")
//    /**
//     * ç”¨æˆ·ä¿¡æ¯
//     */
//    private YouzanTradeGetResult.FansInfo fansInfo;
//    /**
//     * ä¸‰æ–¹APPç”¨æˆ·id
//     */
//    private String outerUserId;
/**
 * ä¹°å®¶è´­ä¹°é™„è¨€
 */
private String buyerMessage;
```

* `buyerId` ï¼Œä¹°å®¶ç”¨æˆ·ç¼–å·ã€‚
* TODO 6005 ï¼šCRM å®¢æˆ·ä¿¡æ¯ç›¸å…³
* `buyerMessage` ï¼Œä¹°å®¶è´­ä¹°é™„è¨€ã€‚  ![](http://www.iocoder.cn/images/Entity/2018_03_01/07.png)

### 3.1.4 æ”¶è´§äººä¿¡æ¯

```Java
/**
 * æ”¶è´§äººçš„åœ°å€ç¼–å·
 *
 * å½“æ— éœ€ç‰©æµæ—¶ï¼Œè¯¥å­—æ®µä¸ºé›¶
 */
private Integer receiverAddressId;
/**
 * æ”¶è´§äººçš„å§“å
 */
private String receiverName;
/**
 * æ”¶è´§äººçš„åœ°åŒºç¼–å·
 */
private Integer receiverPlace;
/**
 * æ”¶è´§äººçš„è¯¦ç»†åœ°å€
 */
private String receiverAddress;
/**
 * æ”¶è´§äººçš„é‚®ç¼–
 */
private String receiverZip;
/**
 * åˆ›å»ºäº¤æ˜“æ—¶çš„ç‰©æµæ–¹å¼ã€‚
 *
 * å–å€¼èŒƒå›´ï¼š
 * 1ï¼šexpressï¼ˆå¿«é€’ï¼‰
 * 2ï¼šfetchï¼ˆåˆ°åº—è‡ªæï¼‰
 * 3ï¼šlocalï¼ˆåŒåŸé…é€ï¼‰
 */
private Integer shippingType;
/**
 * å–å®¶å‘è´§æ—¶é—´
 */
private Date consignTime;
/**
 * ä¹°å®¶ç­¾æ”¶æ—¶é—´
 */
private Date signTime;
```

* `receiverAddressId` ï¼Œæ”¶è´§äººçš„åœ°å€ç¼–å·ã€‚
* `receiverName` **ç­‰ç­‰**ï¼Œ**å†—ä½™**äº¤æ˜“çš„æ”¶è´§åœ°å€ä¿¡æ¯ï¼Œé¿å…ä¹°å®¶ä¿®æ”¹æ”¶è´§äººåœ°å€ç¼–å·å¯¹åº”çš„åœ°å€ä¿¡æ¯ã€‚
* `shippingType` ï¼Œä¸åŒçš„äº¤æ˜“ç±»å‹ï¼Œæœ‰ä¸åŒçš„ç‰©æµæ–¹å¼ã€‚
* `consignTime` ï¼Œå–å®¶å‘è´§æ—¶é—´ã€‚è‹¥æœ‰å¤šç§å•†å“éœ€è¦å¤šæ¬¡å‘è´§ï¼Œå…¨éƒ¨å‘è´§åï¼Œæ‰è®¾ç½®å–å®¶å‘è´§æ—¶é—´å­—æ®µã€‚
* `signTime` ï¼Œä¹°å®¶ç­¾æ”¶æ—¶é—´ã€‚å¤šæ¬¡å‘è´§ï¼Œä¹°å®¶åªç¡®è®¤æ”¶è´§ä¸€æ¬¡ã€‚

### 3.1.5 å–å®¶ä¿¡æ¯

```Java
/**
 * å–å®¶å¯¹è¯¥äº¤æ˜“çš„å¤‡æ³¨
 */
private String tradeMemo;
/**
 * å–å®¶å¤‡æ³¨æ˜Ÿæ ‡ã€‚
 *
 * å–å€¼èŒƒå›´ 1ã€2ã€3ã€4ã€5ï¼›
 * å¦‚æœä¸º0ï¼Œè¡¨ç¤ºæ²¡æœ‰å¤‡æ³¨æ˜Ÿæ ‡
 */
private Integer sellerFlag;
```

* `tradeMemo` ï¼Œå–å®¶å¯¹äº¤æ˜“å¢åŠ å¤‡æ³¨ã€‚**æ³¨æ„**ï¼Œä¸€ä¸ªè®¢å•å¯èƒ½ä¼šæ·»åŠ å¤šæ¬¡å¤‡æ³¨ï¼Œéœ€è¦æ ¹æ®ä¸šåŠ¡éœ€è¦è®°å½•æ“ä½œæ—¥å¿—æˆ–è€…è®¢å•å¤‡æ³¨å†å²æ—¥å¿—ã€‚
* `sellerFlag` ï¼Œæ ‡è®°è®¢å•æ˜Ÿæ ‡æ ‡è¯†ï¼Œç”¨äºå–å®¶ç­›é€‰è®¢å•ã€‚  ![](http://www.iocoder.cn/images/Entity/2018_03_01/08.png)

### 3.1.6 æ”¯ä»˜ä¿¡æ¯

```Java
/**
 * æ”¯ä»˜æµæ°´å·ï¼ˆæ”¯ä»˜å•å·ï¼‰
 */
private String transactionTid;
/**
 * ä¹°å®¶ä»˜æ¬¾æ—¶é—´
 */
private Date payTime;
/**
 * æ”¯ä»˜ç±»å‹ã€‚
 *
 * å–å€¼èŒƒå›´ï¼š
 * 1-WEIXIN (å¾®ä¿¡è‡ªæœ‰æ”¯ä»˜)
 * 2-WEIXIN_DAIXIAO (å¾®ä¿¡ä»£é”€æ”¯ä»˜)
 * 3-ALIPAY (æ”¯ä»˜å®æ”¯ä»˜)
 * 4-BANKCARDPAY (é“¶è¡Œå¡æ”¯ä»˜)
 * 5-PEERPAY (ä»£ä»˜)
 * 6-CODPAY (è´§åˆ°ä»˜æ¬¾)
 * 7-BAIDUPAY (ç™¾åº¦é’±åŒ…æ”¯ä»˜)
 * 8-PRESENTTAKE (ç›´æ¥é¢†å–èµ å“)
 * 9-COUPONPAYï¼ˆä¼˜æƒ åˆ¸/ç å…¨é¢æŠµæ‰£)
 * 10-BULKPURCHASEï¼ˆæ¥è‡ªåˆ†é”€å•†çš„é‡‡è´­)
 * 11-MERGEDPAY (åˆå¹¶ä»˜è´§æ¬¾)
 * 12-ECARDï¼ˆæœ‰èµEå¡æ”¯ä»˜)
 * 13-PREPAIDCARD (å‚¨å€¼å¡æ”¯ä»˜)
 * 14-MARKPAY ï¼ˆæ ‡è®°æ”¯ä»˜ï¼‰
 * 15-OFCASH (ç°é‡‘æ”¯ä»˜)
 */
private Integer payType;
/**
 * å¤–éƒ¨äº¤æ˜“ç¼–å·ã€‚
 *
 * æ¯”å¦‚ï¼Œå¦‚æœæ”¯ä»˜æ–¹å¼æ˜¯å¾®ä¿¡æ”¯ä»˜ï¼Œå°±æ˜¯è´¢ä»˜é€šçš„äº¤æ˜“å•å·
 */
private String outerTid;
```

* `transactionTid` ï¼Œæ”¯ä»˜å•å·ã€‚ä¾‹å¦‚ï¼š180124230146000002 ã€‚
    * åœ¨ä¹°å®¶ä¸‹å•æ—¶ï¼Œåˆ›å»ºäº¤æ˜“çš„åŒæ—¶ï¼Œè°ƒç”¨æ”¯ä»˜ä¸­å¿ƒï¼Œåˆ›å»ºæ”¯ä»˜å•ã€‚é€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼Œè¿›è¡Œæ”¯ä»˜ç•Œé¢æ—¶ï¼Œåœ¨æ”¯ä»˜å•ä¸­å¯ä»¥è¯»å–åˆ°æ”¯ä»˜çš„å†…å®¹ä¿¡æ¯ï¼Œä»è€Œ**è§£è€¦**ã€‚
    * ä» API ä¸Šçœ‹è¿”å›çš„ String ç±»å‹ï¼Œä»æ•°æ®ä¾‹å­ä¸Šçœ‹ï¼Œå¯èƒ½æ˜¯ SnowFlake çš„åˆ†å¸ƒå¼ ID ç®—æ³•ç”Ÿæˆçš„ Long ç±»å‹ã€‚èƒ–å‹å®é™…è®¾è®¡ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±éœ€è¦åšè°ƒæ•´ã€‚
* `payment` ï¼Œå®ä»˜é‡‘é¢ã€‚ç¬”è€…ç»Ÿä¸€æ•´ç†åœ¨äº† [ã€Œ 3.1.9 ä»·æ ¼ä¿¡æ¯ ã€](#) ã€‚
* å¦‚ä¸‹å­—æ®µï¼Œé€šè¿‡æ”¯ä»˜æˆåŠŸåå›è°ƒè®¾ç½®ï¼š
    * `payTime` ï¼Œä¹°å®¶ä»˜æ¬¾æ—¶é—´ã€‚
    * `payType` ï¼Œæ”¯ä»˜ç±»å‹ã€‚å®é™…æˆ‘ä»¬åœ¨åšè®¾è®¡æ—¶ï¼Œå¯ä»¥å¯¹ä¸€äº›æ“ä½œæ–¹å¼åšè¿›ä¸€æ­¥ç»†åŒ–ï¼Œä¾‹å¦‚æ”¯ä»˜å®æœ‰æ”¯ä»˜å® App æ”¯ä»˜ã€æ”¯ä»˜å®æ‰‹æœºç½‘ç«™æ”¯ä»˜ã€æ”¯ä»˜å®ç”µè„‘ç½‘ç«™æ”¯ä»˜ç­‰ç­‰ã€‚è¯¦ç»†å‚è§ï¼š[ã€Špint++ â€”â€” æ”¯ä»˜æ¸ é“å±æ€§å€¼ã€‹](https://www.pingxx.com/api#æ”¯ä»˜æ¸ é“å±æ€§å€¼) ã€‚
    * `outerTid` ï¼Œå¤–éƒ¨äº¤æ˜“ç¼–å·ã€‚æ¯”å¦‚ï¼Œå¦‚æœæ”¯ä»˜æ–¹å¼æ˜¯å¾®ä¿¡æ”¯ä»˜ï¼Œå°±æ˜¯è´¢ä»˜é€šçš„äº¤æ˜“å•å·ã€‚
    

### 3.1.7 é€€æ¬¾ç»´æƒä¿¡æ¯

// TODO 6006ï¼šé€€æ¬¾ç»´æƒ

### 3.1.8 ä¼˜æƒ ä¿¡æ¯

// TODO 6008 ä¼˜æƒ ä¿¡æ¯

### 3.1.9 ä»·æ ¼ä¿¡æ¯

```Java
/**
 * å•†å“æ€»ä»·ï¼ˆå•†å“ä»·æ ¼ä¹˜ä»¥æ•°é‡çš„æ€»é‡‘é¢ï¼‰ã€‚å•ä½ï¼šåˆ†
 */
private Integer totalFee;
/**
 * è¿è´¹ã€‚å•ä½ï¼šåˆ†
 */
private Integer postFee;
/**
 * äº¤æ˜“ä¼˜æƒ é‡‘é¢ï¼ˆä¸åŒ…å«äº¤æ˜“æ˜ç»†ä¸­çš„ä¼˜æƒ é‡‘é¢ï¼‰ã€‚å•ä½ï¼šåˆ†
 *
 * ã€ä¸åŒ…æ‹¬ã€‘ä¾‹å¦‚ï¼Œè´­ä¹°çš„å•†å“å‚åŠ é™åˆ¶æŠ˜æ‰£æ´»åŠ¨ https://help.youzan.com/qa#/menu/2189/detail/919?_k=00rukd
 * ã€åŒ…æ‹¬ã€‘ã€‘å¦å¤–ï¼Œè´­ä¹°çš„å•†å“ä½¿ç”¨ä¼˜æƒ åŠµ https://help.youzan.com/qa#/menu/2185/detail/915?_k=lih1k9
 */
private Integer discountFee;
/**
 * å®ä»˜é‡‘é¢ã€‚å•ä½ï¼šåˆ†
 */
private Integer payment;
/**
 * äº¤æ˜“å®Œæˆåé€€æ¬¾çš„é‡‘é¢ã€‚å•ä½ï¼šåˆ†
 */
private Integer refundedFee;
```

* `totalFee` ï¼Œå•†å“æ€»ä»·ã€‚è¯¥å­—æ®µé€šè¿‡ TradeOrder çš„ `payment` æ±‚å’Œè®¡ç®—ã€‚
* `postFee` ï¼Œè¿è´¹æ€»ä»·ã€‚è¯¥å­—æ®µé€šè¿‡ TradeOrder çš„å•†å“çš„**è¿è´¹ä»·æ ¼**æ±‚å’Œè®¡ç®—ã€‚
* `discountFee` ï¼Œäº¤æ˜“ä¼˜æƒ é‡‘é¢ã€‚**æ³¨æ„**ï¼ŒTradeOrder çš„ `discountFee` ã€‚æ˜¯å¦æœ‰äº›éš¾ä»¥ç†è§£ï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸¤ç§åœºæ™¯ï¼ˆå‡è®¾è¿ç»´ä»·æ ¼ä¸ºé›¶ï¼‰ï¼š
    * è´­ä¹°çš„å•†å“å‚åŠ [æŠ˜æ‰£æ´»åŠ¨](https://help.youzan.com/qa#/menu/2189/detail/919?_k=00rukd)ï¼ŒåŸä»· 100 å…ƒï¼ŒæŠ˜æ‰£ä»· 10 å…ƒã€‚é‚£ä¹ˆæ•°æ®å¦‚ä¸‹ï¼ˆæˆ‘ä»¬ä¼šçœ‹åˆ°æŠ˜æ‰£æ´»åŠ¨è·Ÿç€ TradeOrder èµ°ï¼‰ï¼š
        * TradeOrder ï¼š `totalFee = 100` ï¼Œ`discountFee = 90` ï¼Œ`payment = 10` ã€‚
        * Trade ï¼š`totalFee = TradeOrder.payment = 10` ï¼Œ`discountFee = 0` ï¼Œ`payment = 10` ã€‚
    * è´­ä¹°çš„å•†å“ä½¿ç”¨[ä¼˜æƒ åŠµ](https://help.youzan.com/qa#/menu/2185/detail/915?_k=lih1k9)ï¼Œåœ¨ä¸Šé¢ä¾‹å­çš„åŸºç¡€ä¸Šï¼Œä¼˜æƒ åŠµæ‰“ 2 æŠ˜ã€‚é‚£ä¹ˆæ•°æ®å¦‚ä¸‹ï¼ˆæˆ‘ä»¬ä¼šçœ‹åˆ°ä¼˜æƒ åŠµè·Ÿç€ Trade èµ°ï¼‰ï¼š
        * TradeOrder ï¼š `totalFee = 100` ï¼Œ`discountFee = 90` ï¼Œ`payment = 10` ã€‚
        *  Trade ï¼š`totalFee = TradeOrder.payment = 10` ï¼Œ`discountFee = 2` ï¼Œ`payment = 8` ã€‚
* `payment` ï¼Œå®ä»˜ä»·æ ¼ã€‚è®¡ç®—å…¬å¼ä¸º `payment = totalFee + postFee - discountFee` + **æ¶¨ä»·æˆ–å‡ä»·**ã€‚**æ¶¨ä»·æˆ–å‡ä»·**åœ¨ [ã€Œ3.2 TradeAdjustFeeã€](#) åˆ†äº«ã€‚
* `refundedFee` ï¼Œé€€æ¬¾é‡‘é¢ã€‚

## 3.2 TradeAdjustFee

å•†å®¶åœ¨åå°å¯ä»¥è°ƒæ•´**æœªä»˜æ¬¾**çš„äº¤æ˜“çš„ä»·æ ¼ï¼š  ![](http://www.iocoder.cn/images/Entity/2018_03_01/09.png)

* **æ¶¨å‡**ä»·æ ¼ã€‚**æ³¨æ„**ï¼Œæ¶¨å‡çš„ä¸æ˜¯å•†å“çš„ä»·æ ¼ï¼Œè€Œæ˜¯æœ€ç»ˆå®ä»˜çš„ä»·æ ¼ã€‚
* **è°ƒæ•´**è¿è´¹ä»·æ ¼

[TradeAdjustFee](todo) ï¼Œäº¤æ˜“æ”¹ä»·ä¿¡æ¯ã€‚

```Java
/**
 * äº¤æ˜“ç¼–å· {@link Trade#id}
 */
private Integer id;
/**
 * æ¶¨å‡ä»·æ ¼
 */
private Integer payChange;
/**
 * è¿è´¹è°ƒä»·å·®å€¼
 */
private Integer postChange;
/**
 * æ›´æ–°æ—¶é—´
 */
private Date updateTime;
```

* `id` ï¼Œäº¤æ˜“ç¼–å·ã€‚é€šè¿‡è¯¥å­—æ®µå’Œ Trade `1:1` å…³è”ã€‚è¯¥è¡¨åªè®°å½•æœ€åä¸€æ¬¡çš„ä¿®æ”¹ç»“æœï¼Œå¦‚æœèƒ–å‹éœ€è¦è®°å½•æ¯æ¬¡çš„è°ƒæ•´ï¼Œå¯ä»¥å¢åŠ æ—¥å¿—è¡¨ã€‚
* `payChange` ï¼Œæ¶¨å‡ä»·æ ¼ã€‚
* `postChange` ï¼Œè¿è´¹è°ƒæ•´**å·®ä»·**ã€‚**æ³¨æ„ï¼Œæ˜¯å·®ä»·**ã€‚ä¿®æ”¹åï¼Œ`Trade.postFee` ä¼šæ”¹æˆè¿è´¹ä»·æ ¼ï¼Œè€Œ `postChange` è®°å½•å’ŒåŸæœ‰ä»·æ ¼çš„**å·®ä»·**ã€‚
* `updateTime` ï¼Œæ›´æ–°æ—¶é—´ã€‚

## 3.3 TradeOrder

[TradeOrder](todo) ï¼Œäº¤æ˜“æ˜ç»†ã€‚  
äº¤æ˜“ä¸‹çš„æ¯ç§å•†å“ç”Ÿæˆä¸€æ¡äº¤æ˜“æ˜ç»†è®°å½•ã€‚

å­—æ®µè¾ƒå¤šï¼Œæˆ‘ä»¬è¿›è¡Œç®€å•çš„åˆ‡å—ã€‚

### 3.3.1 åŸºç¡€å­—æ®µ

```Java
/**
 * äº¤æ˜“æ˜ç»†ç¼–å·ã€‚
 */
private Long id;
/**
 * äº¤æ˜“ç¼–å·ã€‚{@link Trade#id}
 */
private String tid;
/**
 * åº—é“ºç¼–å·
 */
private Integer shopId;
/**
 * äº¤æ˜“æ˜ç»†ä¸»çŠ¶æ€
 *
 * {@link Trade#status} ä¸€è‡´
 */
private Integer status;
```

* `id` ï¼Œäº¤æ˜“æ˜ç»†ç¼–å·ã€‚
* `tid` ï¼Œäº¤æ˜“ç¼–å·ï¼ŒæŒ‡å‘ `Trade.id` ã€‚
* `shopId` ï¼Œåº—é“ºç¼–å·ã€‚
* `status` ï¼Œäº¤æ˜“æ˜ç»†ä¸»çŠ¶æ€ï¼Œå’Œ `Trade.status` ä¸€è‡´ã€‚ 
    * ğŸ™‚ çŠ¶æ€çš„è®¾è®¡æ˜¯éå¸¸å€¼å¾—æ¢è®¨ï¼ŒæœŸç›¼èƒ–å‹çš„è®¨è®ºã€‚ 

### 3.3.2 å•†å“ä¿¡æ¯

```Java
/**
 * å•†å“ç¼–å·
 */
private Integer itemId;
/**
 * å•†å“æ ‡é¢˜
 */
private String title;
/**
 * å•†å“ä¸»å›¾ç‰‡åœ°å€
 */
private String picPath;
/**
 * å•†å“ç±»å‹ã€‚
 *
 * 0ï¼šè‡ªè¥ï¼›
 * 10ï¼šåˆ†é”€å•†å“;
 */
private Long goodsType;
/**
 * å•†å“ç±»å‹ {@link cn.iocoder.doraemon.itemgroup.item.entity.Item#itemType}
 */
private Integer itemType;
/**
 * Sku ç¼–å·
 */
private Integer skuId;
/**
 * SKUçš„å€¼ï¼Œå³ï¼šå•†å“çš„è§„æ ¼ã€‚å¦‚ï¼šæœºèº«é¢œè‰²:é»‘è‰²;æ‰‹æœºå¥—é¤:å®˜æ–¹æ ‡é…
 */
private String skuPropertiesName;
/**
 * å•†å“ä»·æ ¼ã€‚å•ä½ï¼šåˆ†
 */
private Integer price;
/**
 * å•†å“è´­ä¹°æ•°é‡
 */
private Integer num;
/**
 * äº¤æ˜“æ˜ç»†ä¸­ä¹°å®¶ç•™è¨€çš„æ•°æ®ç»“æ„ {@link cn.iocoder.doraemon.itemgroup.item.entity.Item#messages}
 */
private String buyerMessages;
/**
 * æ˜¯å¦å…è®¸å‘è´§  1 å¯ä»¥å‘è´§ 0 ä¸èƒ½å‘è´§
 */
private Boolean allowSend;
```

* `itemId` ï¼Œå•†å“ç¼–å·ï¼ŒæŒ‡å‘ `Item.id` ã€‚
* å†—ä½™å•†å“å­—æ®µï¼š
    * `title` ï¼Œå•†å“æ ‡é¢˜ã€‚
    * `picPath` ï¼Œå•†å“ä¸»å›¾ç‰‡åœ°å€ã€‚
    * `goodsType` ï¼Œå•†å“ç±»å‹ã€‚
    * `itemType` ï¼Œå•†å“ç±»å‹ã€‚
* `skuId` ï¼Œå•†å“ SKU ç¼–å·ï¼ŒæŒ‡å‘ `ItemSku.id` ã€‚
* å†—ä½™å•†å“ SKU å­—æ®µï¼š
    * `skuPropertiesName` ï¼ŒSKUçš„å€¼ï¼Œå³ï¼šå•†å“çš„è§„æ ¼ã€‚å¦‚ï¼šæœºèº«é¢œè‰²:é»‘è‰²;æ‰‹æœºå¥—é¤:å®˜æ–¹æ ‡é…ã€‚
    * `price` ï¼Œå•†å“ä»·æ ¼ã€‚
* `num` ï¼Œè´­ä¹°æ•°é‡ã€‚
* `buyerMessages` ï¼Œäº¤æ˜“æ˜ç»†ä¸­ä¹°å®¶ç•™è¨€çš„æ•°æ®ç»“æ„ã€‚  ![](http://www.iocoder.cn/images/Entity/2018_03_01/10.jpg)
* todo allowSend
* // TODO 6007 ï¼šå•†å“å¿«ç…§ç¼–å·ã€‚æœªæ¥è¡¥å……ã€‚

### 3.3.3 é€€æ¬¾ç»´æƒ

// TODO 6006ï¼šé€€æ¬¾ç»´æƒ

### 3.3.4 ä¼˜æƒ ä¿¡æ¯

// TODO 6008 ä¼˜æƒ ä¿¡æ¯

### 3.3.5 ä»·æ ¼ä¿¡æ¯

```Java
/**
 * å•†å“æ€»ä»·ï¼ˆå•†å“ä»·æ ¼ä¹˜ä»¥æ•°é‡çš„æ€»é‡‘é¢ï¼‰ã€‚å•ä½ï¼šåˆ†
 */
private Integer totalFee;
/**
 * äº¤æ˜“æ˜ç»†å†…çš„ä¼˜æƒ é‡‘é¢ã€‚å•ä½ï¼šåˆ†
 */
private Integer discountFee;
/**
 * å®ä»˜é‡‘é¢ã€‚å•ä½ï¼šåˆ†
 */
private Integer payment;
/**
 * é€€æ¬¾é‡‘é¢ã€‚å•ä½ï¼šåˆ†
 */
private Float refundedFee;
```

* æ€»ä½“å’Œ [ã€Œ3.1.9 ä»·æ ¼ä¿¡æ¯ã€](#) ç±»ä¼¼ã€‚
* `totalFee` ï¼Œå•†å“æ€»ä»·ã€‚è¯¥å­—æ®µé€šè¿‡ `price * num` è®¡ç®—ã€‚
* `discountFee` ï¼Œè®¢å•ä¼˜æƒ é‡‘é¢ã€‚
* `payment` ï¼Œå®ä»˜ä»·æ ¼ã€‚è®¡ç®—å…¬å¼ä¸º `payment = discountFee - discountFee` ã€‚
* `refundedFee` ï¼Œé€€æ¬¾é‡‘é¢ã€‚

# 4. API 

åŸºäºå¦‚ä¸‹æ•´ç† API ç±»ã€‚

* [æœ‰èµäº‘æä¾›çš„å•†å®¶ç®¡ç†è®¢å•API](https://www.youzanyun.com/apilist/list/group_trade/trade)
* [æœ‰èµäº‘æä¾›çš„ä¹°å®¶ä¸‹å•API](https://www.youzanyun.com/apilist/list/group_buyer/buyer_bill)

## 4.1 TradeAPI

[TradeAPI](todo) ï¼Œäº¤æ˜“ API ã€‚

![](http://www.iocoder.cn/images/Entity/2018_03_01/11.png)

# 5. äº¬ä¸œè®¢å•ç»“æ„

> åŸºäº [è®¢å•API â€”â€” æ£€ç´¢å•ä¸ªè®¢å•ä¿¡æ¯](https://jos.jd.com/api/detail.htm?apiName=jingdong.pop.order.get&id=1565) å’Œ [è®¢å•API â€”â€” è®¢å•SOPå‡ºåº“](https://jos.jd.com/api/detail.htm?apiName=360buy.order.sop.outstorage&id=411) çŒœæƒ³ã€‚

![](http://www.iocoder.cn/images/Entity/2018_03_01/12.png)

* Order : ç‰©æµå• : OrderItem  = 1 : 1 : N ã€‚
    * æ¯ä¸ª Order å¯ä»¥æœ‰å¤šä¸ª OrderItem ï¼Œå³å¤šä¸ªå•†å“ã€‚
    * æ¯ä¸ª Order å‘è´§ç»‘å®š**ä¸€ä¸ª**ç‰©æµå•ã€‚
* Order åŸºäºå•†å®¶ã€ç‰©æµç­‰æ‹†å•ï¼Œ**å­ Order** é€šè¿‡ `parentOrderId` æŒ‡å‘**çˆ¶ Order** ã€‚

# 666. å½©è›‹

æ–­æ–­ç»­ç»­æŠ˜è…¾äº†ä¸€å‘¨çš„æ—¶é—´ï¼Œä¸»è¦åœ¨å¦‚ä¸‹ç‚¹å¡äº†æ¯”è¾ƒä¹…ï¼š

* Trade å’Œ TradeOrder çš„å…³ç³»ï¼Œå› ä¸ºä¸€åº¦ä»¥ä¸ºæœ‰æ‹†å•çš„é€»è¾‘ã€‚
* ä¸»çŠ¶æ€ï¼ŒæœŸç›¼èƒ–å‹èƒ½å¤Ÿæ¢è®¨ä¸€ä¸‹ã€‚

